<h1><u>Personal Finance Patterns</u></h1>

Это адаптация существующего проекта [(ссылка)](https://github.com/zedaster/PersonalFinanceBot), в котором реализованы 
различные паттерны программирования в учебных целях.

Проектом является чат-бот для управления личными доходами, расходами, бюджетами и для получения отчетности. 
Разработка была поделена на 3 задачи, которые были выполнены в последствии. Они описаны ниже.

Проект реализован с использованием Java, библиотеки Hibernate и разработки через тестирование (TDD)

Реализованные паттерны можно посмотреть в файле [task.md](task.md)

<h1><u>Personal Finance Bot</u></h1>

<h2>Задача 1</h2>

Создать систему учета расходов и доходов

<h3>Приложение должно</h3>

<ul>
    <li>Иметь возможно установить начальный/текущий баланс пользователя (на случай если пользователь забыл записать 
    трату)</li>
    <li>Распределять расходы по категориям</li>
    <li>Уметь функционировать категориями, т.е. изменять/кастомизировать категории
    <li>Сохранять данные о расходах/доходах в базе данных</li>
    <li>Выдавать пользователю данные о доходах и расходах по категориям за определенный месяц</li>
</ul>

<h3>Пример работы</h3>

Команда <b>/set_balance</b>

```html
User: /set_balance [payment]
Bot: Новый баланс установлен.
```

Команда <b>/add_expense</b>

```html
User: /add_expense [fee - плата] [category - категория]
Bot: Добавлен расход по категории [category]
```

Команда <b>/add_income</b>

```html
User: /add_income [fee - доход пользователя] [type - источник дохода:зарплата/перевод]
Bot: Вы успешно добавили доход по источнику: [type]
```

Команда <b>/report_expense</b>

```html
User: /report_expense [mm.yyyy - месяц+год]
Bot: Подготовил отчёт по вашим расходам за месяц [month]:
За месяц [month] вы потратили:
Продукты: 10000 руб.
Такси: 7000 руб.
Развлечения: 3000 руб.
Другое: 1000 руб.
```

Команда <b>/add_income_category</b>

```html
User: /add_income_category [category_name]
Bot: Добавлена новая категория доходов …
```

Команда <b>/add_expense_category</b>

```html
User: /add_expense_category [category_name]
Bot: Добавлена новая категория расходов …
```

Команда <b>/category_remove</b>

```html
User: /category_remove [category_name]
Bot: Удалена категория расходов
```

Команда <b>/remove_income_category</b>

```html
User: /remove_income_category [category_name]
Bot: Категория доходов '[category_name]' успешно удалена
```

Команда <b>/remove_expense_category</b>

```html
User: /remove_expense_category [category_name]
Bot: Категория расходов '[category_name]' успешно удалена
```

Команда <b>/list_expense_categories</b>

```html
User: /list_expense_categories
Bot: Все доступные вам категории расходов:
Стандартные:
- Супермаркеты
- Аптеки
- Развлечения
- Спорт
- Транспорт
- Рестораны и кафе
Персональные:
...
```

Команда <b>/list_income_categories</b>

```html
User: /list_income_categories
Bot: Все доступные вам категории Доходов:
Стандартные:
- Зарплата
- Переводы
Персональные:
...
```

Команда <b>/list_categories</b>

```html
User: /list_categories
Bot: Все доступные вам категории доходов:
Стандартные:
- Зарплата
- Переводы
Персональные:
…

Все доступные вам категории расходов:
Стандартные:
- Супермаркеты
- Аптеки
- Развлечения
- Спорт
- Транспорт
- Рестораны и кафе
Персональные:
…
```

<h2>Задача 2</h2>

Создать систему для планирования бюджета

Она позволит пользователя в начале или в течение месяца спланировать месячные доходы и расходы, сравнивать их с теми,
что добавлены через функционал в 1-й задаче и показывать, какая месячная сумма осталась на расходы и сколько необходимо
еще заработать до указанной в бюджете цели.

<h3>Приложение должно</h3>

<ul>
    <li>Считать общую сумму доходов, расходов за текущий месяц и предыдущие</li>
    <li>Выдавать количество денег, которое осталось заработать, а также количество денег,
    которые еще можно потратить для текущего месяца</li>
    <li>Выдавать средние месячные доходы и расходы при запросе бюджетов с нескольких месяцев</li>
</ul>

<h3>Условия</h3>

<ul>
    <li>Баланс переноситься с предыдущего месяца на следующий</li>
    <li>Можно создавать и изменять детали бюджета (планируемый доход/расход) на текущий и следующие месяца, но нельзя 
    изменить бюджеты за предыдущие месяцы.</li>
</ul>

<h3>Пример работы</h3>

Команда <b>/budget</b>

Команда позволит показать бюджет на текущий месяц. Для планирования ожидаемых доходов и расходов команды указаны ниже.
Текущие доходы и расходы посчитаны суммированием доходов/трат, добавленных функционал из задачи 1, за текущий месяц.
Текущий баланс рассчитывается формулой `установленный баланс + доходы - расходы`. Доходы и расходы суммируются либо от
момента установки баланса, либо с начала месяца, в зависимости от того, что произошло позднее.
“Нужно еще заработать” и “Еще осталось на затраты” рассчитаны как дельта между ожидаемыми и текущими доходами/расходами

```html
User: /budget
Bot: Бюджет на Февраль 2023:
Ожидаемые доходы: 60 000
Ожидаемые расходы: 50 000
Текущие доходы: 5 000
Текущие расходы: 6 500
Текущий баланс: 98 500
Нужно еще заработать: 55 000
Еще осталось на траты: 43 500

Для просмотра команд введите /budget_help
```

Команда <b>/budget_help</b>

```html
User: /budget_help
Bot: Доступные команды для работы с бюджетами:
/budget - показать бюджет за текущий месяц
/budget_list - запланированный бюджет за последние 12 месяцев
/budget_list [год] -  запланированные бюджеты за определенный год
/budget_list [нач. мес] [кон. мес] - запланированные бюджеты за определенные месяца
/budget_create [мес] [ож доходы] [ож расходы] - планировать бюджет
```

Команда <b>/budget_create</b>

```html
User: /budget_create 02.2023 60000 50000
Bot: Бюджет на Февраль 2023 создан.
Ожидаемые доходы: 60 000
Ожидаемые расходы: 50 000
Текущие доходы: 5 000
Текущие расходы: 6 500
Текущий баланс: 98 500
Нужно еще заработать: 55 000
Еще осталось на траты: 43 500
```

Команда <b>/budget_set_income</b>

```html
User: /budget_set_income 03.2023 65000
Bot: Бюджет на Март 2023 изменен:
Ожидаемые доходы: 65 000
Ожидаемые расходы: 50 000
```

```html
User: /budget_set_income 65000
Bot: Бюджет на текущий месяц (Февраль 2023) изменен:
Ожидаемые доходы: 65 000
Ожидаемые расходы: 50 000
Текущие доходы: 5 000
Текущие расходы: 6 500
Нужно еще заработать: 60 000
Еще осталось на траты: 43 500
```

Команда <b>/budget_set_expenses</b>

```html
User: /budget_set_expenses 03.2023 50000
Bot: Бюджет на Март 2023 изменен:
Ожидаемые доходы: 65 000
Ожидаемые расходы: 50 000
```

```html
User: /budget_set_expenses 55000
Bot: Бюджет на текущий месяц (Февраль 2023) изменен:
Ожидаемые доходы: 65 000
Ожидаемые расходы: 55 000
Текущие доходы: 5 000
Текущие расходы: 6 500
Текущий баланс: 98 500
Нужно еще заработать: 60 000
Еще осталось на траты: 48 500
```

Команда <b>/budget_list</b>

```html
User: /budget_list
Bot: Ваши запланированные доходы и расходы по месяцам:
Январь 2023
Ожидание: + 80 000 | - 60 000
Реальность: + 75 000 | - 70 364
Февраль 2023 Д 100 000 | Р 70 000  | + 103 000 | - 68 598
…
Декабрь 2023 Д 100 000 | Р 70 000 | + 103 000 | - 68 598
Данные показаны за последние 12 месяцев. Чтобы посмотреть данные, например, за 2022, введите /budget_list 2022.
Для показа данных по определенным месяцам, например, с ноября 2022 по январь 2023 введите /budget_list 10.2022 01.2023
```

```html
User: /budget_list 2022
Bot: Ваши запланированные доходы и расходы по месяцам:
Январь 2022
Ожидание: + 80 000 | - 60 000
Реальность: + 75 000 | - 70 364
Февраль 2022 Д 100 000 | Р 70 000 | + 103 000 | - 68 598
…
Декабрь 2022 Д 100 000 | Р 70 000 | + 103 000 | - 68 598
Данные показаны на 2022 год.
```

```html
User: /budget_list 11.2022 02.2023
Bot: Ваши запланированные доходы и расходы по месяцам:
Ноябрь 2022 Д 80 000 | Р 60 000 | + 75 000 | - 70 364
Декабрь 2022 Д 100 000 | Р 70 000 | + 103 000 | - 68 598
Январь 2023 Д 80 000 | Р 60 000 | + 75 000 | - 70 364
Данные показаны за 4 указанных месяца.
```

<h2>Задача 3</h2>
Создать функционал для составления статистики

<h4>Список стандартных категорий:*</h4>

<ul>
    <li>Супермаркеты</li>
    <li>Аптеки</li>
    <li>Развлечения</li>
    <li>Спорт</li>
    <li>Транспорт</li>
    <li>Рестораны и кафе</li>
    <li>Зарплата</li>
    <li>Переводы</li>
</ul>

<h3>Приложение должно</h3>
<ul>
    <li>Выдавать средние расходы и доходы по стандартным категориям* в течение месяца (команда /avg_report)</li>
    <li>Выдавать средние месячные общие доходы и расходы по пользователям, оставляя их инкогнито 
    (команда /estimate_report)</li>
</ul>

<h3>Пример работы</h3>

Команда <b>/avg_report</b>

```html
User: /avg_report
Bot: Подготовил отчет по категориям со всех пользователей за текущий месяц
Супермаркеты: 13500 руб.
Аптеки: 2542 руб.
Развлечения: 1548 руб.
Спорт: 3244 руб.
Транспорт: 3223 руб
Рестораны и кафе: 3240 руб.
```

```html
User: /avg_report 10.2023
Bot: Подготовил отчет по стандартным категориям со всех пользователей за Октябрь 2023
Супермаркеты: 2341 руб.
Аптеки: 2352 руб.
Развлечения: 10528 руб.
Спорт: 3243 руб.
Транспорт: 3242 руб
Рестораны и кафе: 3234 руб.
```

Команда <b>/estimate_report</b>

```html
User: /estimate_report
Bot: Подготовил отчет по средним доходам и расходам пользователей за текущий месяц:
Расходы: 63537 руб.
Доходы: 96234 руб.
```

```html
User: /estimate_report 10.2023
Bot: Подготовил отчет по средним доходам и расходам пользователей Октябрь 2023:
Расходы: 71538 руб.
Доходы: 105426 руб.
```

